--- origsrc/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/CMakeLists.txt	2016-12-02 15:54:06.000000000 -0600
+++ src/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/CMakeLists.txt	2017-02-09 22:26:14.920512300 -0600
@@ -20,6 +20,9 @@ if (APPLE)
 	# a lot of undefined symbols in use, use this hack until they're filled out.
 	set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-flat_namespace,-undefined,warning")
 endif()
+if(CYGWIN)
+	set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,--allow-multiple-definition")
+endif()
 
 set(WINPR_DIR ${CMAKE_CURRENT_SOURCE_DIR})
 set(WINPR_SRCS "")
--- origsrc/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/library/library.c	2016-12-02 15:54:06.000000000 -0600
+++ src/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/library/library.c	2017-02-09 21:47:56.204805700 -0600
@@ -220,7 +220,7 @@ DWORD GetModuleFileNameW(HMODULE hModule
 
 DWORD GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize)
 {
-#if defined(__linux__)
+#if defined(__linux__) || defined(__CYGWIN__)
 	int status;
 	int length;
 	char path[64];
--- origsrc/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/synch/synch.h	2016-12-02 15:54:06.000000000 -0600
+++ src/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/synch/synch.h	2017-02-09 21:48:11.411736500 -0600
@@ -28,7 +28,7 @@
 
 #include <winpr/synch.h>
 
-#ifdef __linux__
+#if defined(__linux__) || defined(__CYGWIN__)
 #define WITH_POSIX_TIMER	1
 #endif
 
--- origsrc/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/synch/timer.c	2016-12-02 15:54:06.000000000 -0600
+++ src/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/synch/timer.c	2017-02-09 21:48:25.284002100 -0600
@@ -106,7 +106,7 @@ BOOL TimerCloseHandle(HANDLE handle) {
   if (!TimerIsHandled(handle))
     return FALSE;
 
-#ifdef __linux__
+#if defined(__linux__) || defined(__CYGWIN__)
 
 	if (timer->fd != -1)
 		close(timer->fd);
--- origsrc/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/sysinfo/sysinfo.c	2016-12-02 15:54:06.000000000 -0600
+++ src/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/sysinfo/sysinfo.c	2017-02-09 21:49:41.685112000 -0600
@@ -25,7 +25,7 @@
 #include <winpr/sysinfo.h>
 #include <winpr/platform.h>
 
-#if defined(__linux__) && defined(__GNUC__)
+#if (defined(__linux__) || defined(__CYGWIN__)) && defined(__GNUC__)
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <fcntl.h>
@@ -97,7 +97,7 @@ static DWORD GetNumberOfProcessors()
 {
 	DWORD numCPUs = 1;
 	/* TODO: iOS */
-#if defined(__linux__) || defined(__sun) || defined(_AIX)
+#if defined(__linux__) || defined(__sun) || defined(_AIX) || defined(__CYGWIN__)
 	numCPUs = (DWORD) sysconf(_SC_NPROCESSORS_ONLN);
 #elif defined(__MACOSX__) || \
 	defined(__FreeBSD__) || defined(__NetBSD__) || \
--- origsrc/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/winsock/winsock.c	2016-12-02 15:54:06.000000000 -0600
+++ src/FreeRDP-d72ff5d241c63822af9f0d6784a060129d9d010d/winpr/libwinpr/winsock/winsock.c	2017-02-09 22:20:17.486825800 -0600
@@ -923,7 +923,7 @@ int WSAIoctl(SOCKET s, DWORD dwIoControl
 
 next_ifreq:
 
-#if !defined(__linux__) && !defined(__sun__)
+#if !defined(__linux__) && !defined(__sun__) && !defined(__CYGWIN__)
 		ifreq_len = IFNAMSIZ + ifreq->ifr_addr.sa_len;
 #else
 		ifreq_len = sizeof(*ifreq);
